(function(a){var h,i=function(){},t=a.document,i={set:i,get:i,remove:i,clear:i,each:i,obj:i,length:0};(function(){if("localStorage"in a)try{h=a.localStorage;return}catch(v){}var c=t.getElementsByTagName("head")[0],j=a.location.hostname||"localStorage",i=new Date,o,n;if(c.addBehavior){try{n=new ActiveXObject("htmlfile"),n.open(),n.write('<script>document.w=window;<\/script><iframe src="/favicon.ico"></iframe>'),n.close(),o=n.w.frames[0].document,c=o.createElement("head"),o.appendChild(c)}catch(m){c=
t.getElementsByTagName("head")[0]}try{i.setDate(i.getDate()+36500),c.addBehavior("#default#userData"),c.expires=i.toUTCString(),c.load(j),c.save(j)}catch(p){return}var f,l;try{f=c.XMLDocument.documentElement,l=f.attributes}catch(s){return}var q=/^p__hack_/,e=RegExp("m-_-c","g"),d=function(a){return encodeURIComponent("p__hack_"+a).replace(/%/g,"m-_-c")};h={length:l.length,isVirtualObject:!0,getItem:function(a){return(l.getNamedItem(d(a))||{nodeValue:null}).nodeValue||f.getAttribute(d(a))},setItem:function(a,
e){try{f.setAttribute(d(a),e),c.save(j),this.length=l.length}catch(b){}},removeItem:function(a){try{f.removeAttribute(d(a)),c.save(j),this.length=l.length}catch(e){}},clear:function(){for(;l.length;)this.removeItem(l[0].nodeName);this.length=0},key:function(a){return l[a]?decodeURIComponent(l[a].nodeName.replace(e,"%")).replace(q,""):void 0}};if(!("localStorage"in a))a.localStorage=h}else try{h=a.localStorage}catch(b){h=null}})();a.LS=!h?i:{set:function(a,c){void 0!==this.get(a)&&this.remove(a);h.setItem(a,
c);this.length=h.length},get:function(a){a=h.getItem(a);return null===a?void 0:a},remove:function(a){h.removeItem(a);this.length=h.length},clear:function(){h.clear();this.length=0},each:function(a){var c=this.obj(),a=a||function(){},j;for(j in c)if(!1===a.call(this,j,this.get(j)))break},obj:function(){var a={},c=0,j,i;if(h.isVirtualObject)a=h.key(-1);else for(j=h.length;c<j;c++)i=h.key(c),a[i]=this.get(i);return a},length:h.length};if(a.jQuery)a.jQuery.LS=a.LS})(window);
(function(a){function h(){m=a("<div />").attr("id","ui-artdialog").css("display","none").appendTo(a("body"));a("<div />").attr("class","ui-artdialog-bg").appendTo(m);j_checkPanel=a("<div />").attr("id","j_checkPanel").appendTo(m);p=a("<div />").attr("id","j_cityPanel").css({display:"none","margin-top":l}).attr("class","ui-artdialog-main").appendTo(m);p.append('<ul class="ui-inset ui-list" index="1"></ul><ul class="ui-inset ui-list" index="2"></ul><ul class="ui-inset ui-list" index="3"></ul>')}function i(a,
d){f[a].name=d.name||"";f[a].code=d.code||"";for(var b=a+1;3>b;b++)f[b].name="",f[b].code=""}function t(e,d){var b=[],r=[],g;for(g in f)if(""!=f[g].name)b[b.length]=f[g].name,r[r.length]=f[g].code;a(d).val(b.join("-"));a("#"+e.codeId).val(r.join("-"));0<a("#"+e.nameId).length&&a("#"+e.nameId).val(b.join("-"));m.hide();p.hide()}function v(e,d,b){a("#"+e.codeId).val();0<a("#"+e.nameId).length?a("#"+e.nameId).val():a(b).val();var r,g=a("ul.ui-list"),i=3<parseInt(d,10)+1?3:parseInt(d,10)+1,k=0;j_checkPanel.html("");
k=a("<a />").attr("id","out_city").text("\u9000\u51fa\u9009\u62e9");k.click(function(){m.hide();p.hide()});j_checkPanel.append(k);k=0==k.height()?l:k.height()+20;p.css("margin-top",i*k);1<=d&&(s.attr("data-level","1").attr("data-code",f[0].code).attr("data-name",f[0].name),s.html(f[0].name+"<span>\u70b9\u6b64\u91cd\u9009</span>"),j_checkPanel.append(s),s.click(function(){window.scrollTo(0,0);n(a(g[0]),e.provinceData);j(e,g[0],0,b)}));2<=d&&(q.attr("data-level","1").attr("data-code",f[1].code).attr("data-name",
f[1].name),q.html(f[1].name+"<span>\u70b9\u6b64\u91cd\u9009</span>"),j_checkPanel.append(q),q.click(function(){window.scrollTo(0,0);(r=window.LS.get(f[0].name+"_"+f[0].code))?(console.log("ddd_cache"),u(JSON.parse(r),1),j(e,g[1],1,b)):(console.log("ddd_ajax"),o(f[0].name+"_"+f[0].code,1,function(){j(e,g[1],1,b)}))}))}function c(e,d){var b=a("#"+e.codeId).val(),f=0<a("#"+e.nameId).length?a("#"+e.nameId).val():a(d).val(),g=[],c=[],k=0,h=a("ul.ui-list");a(d).attr("id");0<b.length?(g=b.split("-"),c=f.split("-"),
k=3==g.length?1:g.length-1,b=window.LS.get(c[k]+"_"+g[k]),i(0,{name:c[0],code:g[0]}),i(1,{name:c[1],code:g[1]}),b?(u(JSON.parse(b),g.length-1),j(e,h[g.length-1],g.length,d)):o(c[k]+"_"+g[k],g.length-1,function(){j(setting,h[g.length-1],g.length,clickTarget)})):(n(a(h[0]),e.provinceData),j(e,h[0],0,d));m.show();p.show()}function j(e,d,b,c){var g=a("ul.ui-list");v(e,b,c);a(d).find("li.panel-item").each(function(){window.scrollTo(0,0);a(this).click(function(){var b=a(this),d=b.attr("data-level"),f=b.text(),
b=b.attr("data-code"),h;i(d-1,{name:f,code:b});3==d?(j(e,g[2],d,c),t(e,c)):(h=window.LS.get(f+"_"+b))?(u(JSON.parse(h),d),j(e,g[d],d,c)):o(f+"_"+b,d,function(){j(e,g[d],d,c)})})})}function u(e,d){var b=a("ul.ui-list");n(a(b[d]),e)}function o(e,d,b){var c=a("ul.ui-list");a.ajax({type:"POST",url:ROOT_PATH+ "/adcd/loadCityData.htm",data:"param="+e+"&t="+(new Date).getTime(),dataType:"json",timeout:3E4,beforeSend:function(){},success:function(g){n(a(c[d]),g.cityData);window.LS.set(e,JSON.stringify(g.cityData));b()},
error:function(){}})}function n(e,d){var b=[],c=parseInt(e.attr("index"),10);a("ul.ui-list").hide();3==c&&b.push();for(var c=0,g=d.length;c<g;c++){var f=d[c];b.push('<li class="panel-item');b.push('" data-level="');b.push(f.level);b.push('" data-code="');b.push(f.code);b.push('">');b.push(f.name);b.push("</li>")}e.html(b.join(""));e.show()}a("body");var m=a("#ui-artdialog_city"),p=a("#j_cityPanel");a("#j_checkPanel");var f=[{name:"",code:""},{name:"",code:""},{name:"",code:""}],l=41,s=a("<a />").attr("id",
"back_prov"),q=a("<a />").attr("id","back_city");console.log(m.length);0==m.length&&h();a.fn.CityPicker=function(e){var d=this;d.click(function(b){a(this);var f=a.extend(a.fn.CityPicker.defaults,e);0==m.length&&h();b.preventDefault();b.stopPropagation();i(0,{name:"",code:""});i(1,{name:"",code:""});i(2,{name:"",code:""});c(f,d);return!1})};a.fn.CityPicker.defaults={nameId:"",codeId:"",provinceData:[{name:"\u5317\u4eac",code:"110000",level:1},{name:"\u5929\u6d25",code:"120000",level:1},{name:"\u6cb3\u5317",
code:"130000",level:1},{name:"\u5c71\u897f",code:"140000",level:1},{name:"\u5185\u8499\u53e4",code:"150000",level:1},{name:"\u8fbd\u5b81",code:"210000",level:1},{name:"\u5409\u6797",code:"220000",level:1},{name:"\u9ed1\u9f99\u6c5f",code:"230000",level:1},{name:"\u4e0a\u6d77",code:"310000",level:1},{name:"\u6c5f\u82cf",code:"320000",level:1},{name:"\u6d59\u6c5f",code:"330000",level:1},{name:"\u5b89\u5fbd",code:"340000",level:1},{name:"\u798f\u5efa",code:"350000",level:1},{name:"\u6c5f\u897f",code:"360000",level:1},
{name:"\u5c71\u4e1c",code:"370000",level:1},{name:"\u6cb3\u5357",code:"410000",level:1},{name:"\u6e56\u5317",code:"420000",level:1},{name:"\u6e56\u5357",code:"430000",level:1},{name:"\u5e7f\u4e1c",code:"440000",level:1},{name:"\u5e7f\u897f",code:"450000",level:1},{name:"\u6d77\u5357",code:"460000",level:1},{name:"\u91cd\u5e86",code:"500000",level:1},{name:"\u56db\u5ddd",code:"510000",level:1},{name:"\u8d35\u5dde",code:"520000",level:1},{name:"\u4e91\u5357",code:"530000",level:1},{name:"\u897f\u85cf",code:"540000",
level:1},{name:"\u9655\u897f",code:"610000",level:1},{name:"\u7518\u8083",code:"620000",level:1},{name:"\u9752\u6d77",code:"630000",level:1},{name:"\u5b81\u590f",code:"640000",level:1},{name:"\u65b0\u7586",code:"650000",level:1}],hashCreateCount:0,checkIndex:1}})(jQuery);
